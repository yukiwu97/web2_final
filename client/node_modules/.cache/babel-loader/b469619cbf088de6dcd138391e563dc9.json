{"ast":null,"code":"var _jsxFileName = \"/Users/mengjiang/Desktop/yuki_webprogram/web2/web2_final/src/components/record.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport dateFormat from 'dateformat';\nimport { Link } from 'react-router-dom';\nexport default class Record extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      recordsList: [],\n      sum: 0,\n      selectedYear: '',\n      selectedMonth: ''\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.selectedYear == '' && this.state.selectedMonth == '') {\n      axios.get(\"http://localhost:3003/record\").then(res => {\n        const recordsData = res.data;\n        console.log(recordsData);\n        this.setState({\n          recordsList: recordsData,\n          sum: this.calculateSum(recordsData)\n        });\n      });\n    } // axios.get(\"http://localhost:3003/record\")\n    //     .then(res => {\n    //         const recordsData = res.data;\n    //         console.log(recordsData);\n    //         this.setState({\n    //             recordsList : recordsData\n    //         });\n    //     })\n\n  }\n\n  deleteRecord(e, record) {\n    e.preventDefault();\n    axios.get('http://localhost:3003/record/delete/' + record._id).then(res => {\n      console.log(res);\n      console.log(res.data);\n    });\n    window.location = '/';\n  }\n\n  getLocalFormatDate(d) {\n    const utcDate = new Date(d);\n    const localDate = new Date(utcDate.getTime() + utcDate.getTimezoneOffset() * 60000);\n    return dateFormat(localDate, \"ddd mmm dd, yyyy\");\n  }\n\n  calculateSum(dataList) {\n    //return dataList.reduce((a, b) => parseInt(a.amount) + parseInt(b.amount), 0)\n    var sum = 0;\n    dataList.forEach(item => {\n      sum = sum + parseFloat(item.amount);\n    });\n    return sum;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"record\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, \"Money Manager\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"year_month_selector\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"select_year\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }\n    }, \"Select Year: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"year\",\n      placeholder: \"\",\n      value: this.state.selectedYear,\n      onChange: this.onChangeAmount,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"expense_sum\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }, \"total expense: \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, '$' + this.state.sum.toFixed(2))), /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }\n    }, \"DATE\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }\n    }, \"AMOUNT\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 25\n      }\n    }, \"CATEGORY\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }\n    }, \"NOTES\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }\n    }, this.state.recordsList.map(record => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"counterCell\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 29\n      }\n    }, this.getLocalFormatDate(record.date)), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }\n    }, record.amount.toFixed(2)), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, record.category), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 29\n      }\n    }, record.notes), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: '/update',\n        updateProps: record\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 35\n      }\n    }, \"update\"))), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => {\n        this.deleteRecord(e, record);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 56\n      }\n    }, \"delete\")))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/mengjiang/Desktop/yuki_webprogram/web2/web2_final/src/components/record.component.js"],"names":["React","Component","axios","dateFormat","Link","Record","state","recordsList","sum","selectedYear","selectedMonth","componentDidMount","get","then","res","recordsData","data","console","log","setState","calculateSum","deleteRecord","e","record","preventDefault","_id","window","location","getLocalFormatDate","d","utcDate","Date","localDate","getTime","getTimezoneOffset","dataList","forEach","item","parseFloat","amount","render","onSubmit","onChangeAmount","toFixed","map","date","category","notes","pathname","updateProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport dateFormat from 'dateformat';\nimport { Link } from 'react-router-dom';\n\nexport default class Record extends Component {\n    state = {\n        recordsList: [],\n        sum: 0,\n        selectedYear: '',\n        selectedMonth: ''\n    }\n\n    componentDidMount() {\n        if (this.state.selectedYear == '' && this.state.selectedMonth == '') {\n            axios.get(\"http://localhost:3003/record\")\n            .then(res => {\n                const recordsData = res.data;\n                console.log(recordsData);\n                this.setState({\n                    recordsList : recordsData,\n                    sum: this.calculateSum(recordsData)\n                });\n            })\n        }\n        // axios.get(\"http://localhost:3003/record\")\n        //     .then(res => {\n        //         const recordsData = res.data;\n        //         console.log(recordsData);\n        //         this.setState({\n        //             recordsList : recordsData\n        //         });\n        //     })\n    }\n\n    deleteRecord(e, record) {\n        e.preventDefault();\n\n        axios.get('http://localhost:3003/record/delete/' + record._id)\n            .then(res => {\n                console.log(res);\n                console.log(res.data);\n            })\n        window.location = '/';\n    }\n\n    getLocalFormatDate(d) {\n        const utcDate = new Date(d);\n        const localDate = new Date(utcDate.getTime() + utcDate.getTimezoneOffset() * 60000);\n        return dateFormat(localDate, \"ddd mmm dd, yyyy\");\n    }\n\n    calculateSum(dataList) {\n        //return dataList.reduce((a, b) => parseInt(a.amount) + parseInt(b.amount), 0)\n        var sum = 0;\n        dataList.forEach(item => {\n            sum = sum + parseFloat(item.amount);\n        });\n        return sum;\n    }\n\n    render() {\n        return(\n        <div className=\"record\">\n            <h1>Money Manager</h1>\n            <div className=\"year_month_selector\">\n                <form onSubmit={this.onSubmit}>\n                    <div className=\"select_year\">\n                        <label>Select Year: </label>\n                        <input type=\"number\" name=\"year\" placeholder=\"\" value={this.state.selectedYear} onChange={this.onChangeAmount} required/>\n                    </div>\n                </form>\n            </div>\n            <div className=\"expense_sum\">\n                <label>total expense: </label>\n                <span>{'$' + this.state.sum.toFixed(2)}</span>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <th></th>\n                        <th className='desc-h-col'>DATE</th>\n                        <th className='desc-h-col'>AMOUNT</th>\n                        <th className='desc-h-col'>CATEGORY</th>\n                        <th className='desc-h-col'>NOTES</th>\n                        <th className='button-col'></th>\n                        <th className='button-col'></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {this.state.recordsList.map(record =>\n                        <tr>\n                            <td className='counterCell'></td>\n                            <td className='desc-col'>{this.getLocalFormatDate(record.date)}</td>\n                            <td className='desc-col'>{record.amount.toFixed(2)}</td>\n                            <td className='desc-col'>{record.category}</td>\n                            <td className='desc-col'>{record.notes}</td>\n                            <td className='button-col'>\n                                <Link to={\n                                    {\n                                        pathname: '/update',\n                                        updateProps: record\n                                    }\n                                }><button>update</button></Link>\n                            </td>\n                            <td className='button-col'><button onClick = {(e) => {this.deleteRecord(e, record)}}>delete</button></td>\n                        </tr>\n                    )}\n                </tbody>\n            </table>\n        </div>\n    )\n    }\n}"]},"metadata":{},"sourceType":"module"}