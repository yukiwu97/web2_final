{"ast":null,"code":"var _jsxFileName = \"/Users/mengjiang/Desktop/yuki_webprogram/web2/web2_final/src/components/record.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport dateFormat from 'dateformat';\nimport { Link } from 'react-router-dom';\nimport Popup from \"reactjs-popup\";\nimport Charts from \".charts.component\";\n\nclass Record extends Component {\n  constructor(props) {\n    super(props);\n    this.handleSelectYear = this.handleSelectYear.bind(this);\n    this.handleSelectMonth = this.handleSelectMonth.bind(this);\n    this.onSubmitSelect = this.onSubmitSelect.bind(this);\n    this.state = {\n      recordsList: [],\n      sum: 0,\n      selectedYear: 0,\n      selectedMonth: 0\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:3003/record\").then(res => {\n      const recordsData = res.data;\n      console.log(recordsData);\n      this.setState({\n        recordsList: recordsData.sort((a, b) => a.year > b.year ? 1 : a.year === b.year ? a.month > b.month ? 1 : -1 : -1),\n        sum: this.calculateSum(recordsData)\n      });\n    });\n  }\n\n  deleteRecord(e, record) {\n    e.preventDefault();\n    axios.get('http://localhost:3003/record/delete/' + record._id).then(res => {\n      console.log(res);\n      console.log(res.data);\n    });\n    window.location = '/';\n  }\n\n  getLocalFormatDate(d) {\n    const utcDate = new Date(d);\n    const localDate = new Date(utcDate.getTime() + utcDate.getTimezoneOffset() * 60000);\n    return dateFormat(localDate, \"ddd mmm dd, yyyy\");\n  }\n\n  calculateSum(dataList) {\n    var sum = 0;\n    dataList.forEach(item => {\n      sum = sum + parseFloat(item.amount);\n    });\n    return sum;\n  }\n\n  handleSelectYear(e) {\n    this.setState({\n      selectedYear: e.target.value\n    });\n  }\n\n  handleSelectMonth(e) {\n    this.setState({\n      selectedMonth: e.target.value\n    });\n  }\n\n  onSubmitSelect(e) {\n    e.preventDefault();\n    axios.get(\"http://localhost:3003/record/yearMonth/\" + this.state.selectedYear + \"/\" + this.state.selectedMonth).then(res => {\n      const recordsData = res.data;\n      console.log(recordsData);\n      this.setState({\n        recordsList: recordsData,\n        sum: this.calculateSum(recordsData)\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"record\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, \"Money Manager\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmitSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, \"Select Year: \"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"year\",\n      name: \"year\",\n      value: this.state.selectedYear,\n      onChange: this.handleSelectYear,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"0\",\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, \"Select All\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2020\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, \"2020\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2019\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, \"2019\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2018\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }\n    }, \"2018\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2017\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    }, \"2017\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2016\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }, \"2016\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2015\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, \"2015\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2014\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }, \"2014\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2013\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, \"2013\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2012\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, \"2012\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2011\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, \"2011\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2010\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, \"2010\")), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, \"Select Month: \"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"month\",\n      name: \"month\",\n      onChange: this.handleSelectMonth,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"0\",\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, \"Select All\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, \"JAN\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, \"FEB\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }, \"MAR\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, \"APR\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, \"MAY\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    }, \"JUN\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, \"JUL\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, \"AUG\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, \"SEP\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }\n    }, \"OCT\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"11\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    }, \"NOV\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }\n    }, \"DEC\")), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"submit\",\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"expense_sum\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, \"total expense: \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, '$' + this.state.sum.toFixed(2)), /*#__PURE__*/React.createElement(Popup, {\n      trigger: /*#__PURE__*/React.createElement(\"button\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 33\n        }\n      }, \" Show Expense Chart\"),\n      position: \"right center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, \"DATE\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    }, \"AMOUNT\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }, \"CATEGORY\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, \"NOTES\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, this.state.recordsList.map(record => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"counterCell\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, this.getLocalFormatDate(record.date)), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 29\n      }\n    }, record.amount.toFixed(2)), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 29\n      }\n    }, record.category), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 29\n      }\n    }, record.notes), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: '/update',\n        updateProps: record\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 35\n      }\n    }, \"update\"))), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => {\n        this.deleteRecord(e, record);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 56\n      }\n    }, \"delete\")))))));\n  }\n\n}\n\nexport default Record;","map":{"version":3,"sources":["/Users/mengjiang/Desktop/yuki_webprogram/web2/web2_final/src/components/record.component.js"],"names":["React","Component","axios","dateFormat","Link","Popup","Charts","Record","constructor","props","handleSelectYear","bind","handleSelectMonth","onSubmitSelect","state","recordsList","sum","selectedYear","selectedMonth","componentDidMount","get","then","res","recordsData","data","console","log","setState","sort","a","b","year","month","calculateSum","deleteRecord","e","record","preventDefault","_id","window","location","getLocalFormatDate","d","utcDate","Date","localDate","getTime","getTimezoneOffset","dataList","forEach","item","parseFloat","amount","target","value","render","toFixed","map","date","category","notes","pathname","updateProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport dateFormat from 'dateformat';\nimport { Link } from 'react-router-dom';\nimport Popup from \"reactjs-popup\";\nimport Charts from \".charts.component\";\n\nclass Record extends Component {\n\n    constructor(props) {\n        super(props);\n        this.handleSelectYear = this.handleSelectYear.bind(this);\n        this.handleSelectMonth = this.handleSelectMonth.bind(this);\n        \n        this.onSubmitSelect = this.onSubmitSelect.bind(this);\n\n        this.state = {\n            recordsList: [],\n            sum: 0,\n            selectedYear: 0,\n            selectedMonth: 0\n        }\n    }\n\n    componentDidMount() {\n        axios.get(\"http://localhost:3003/record\")\n            .then(res => {\n                const recordsData = res.data;\n                console.log(recordsData);\n                this.setState({\n                    recordsList : recordsData.sort((a,b) => (a.year > b.year) ? 1: (a.year ===b.year) ? ((a.month > b.month) ? 1:-1):-1),\n                    sum: this.calculateSum(recordsData)\n                });\n            })\n    }\n\n    deleteRecord(e, record) {\n        e.preventDefault();\n\n        axios.get('http://localhost:3003/record/delete/' + record._id)\n            .then(res => {\n                console.log(res);\n                console.log(res.data);\n            })\n        window.location = '/';\n    }\n\n    getLocalFormatDate(d) {\n        const utcDate = new Date(d);\n        const localDate = new Date(utcDate.getTime() + utcDate.getTimezoneOffset() * 60000);\n        return dateFormat(localDate, \"ddd mmm dd, yyyy\");\n    }\n\n    calculateSum(dataList) {\n        var sum = 0;\n        dataList.forEach(item => {\n            sum = sum + parseFloat(item.amount);\n        });\n        return sum;\n    }\n\n    handleSelectYear(e) {\n        this.setState({\n            selectedYear: e.target.value\n        });\n    }\n\n    handleSelectMonth(e) {\n        this.setState({\n            selectedMonth: e.target.value\n        });\n    }\n\n    onSubmitSelect(e) {\n        e.preventDefault();\n\n        axios.get(\"http://localhost:3003/record/yearMonth/\" + this.state.selectedYear + \"/\" + this.state.selectedMonth)\n            .then(res => {\n                const recordsData = res.data;\n                console.log(recordsData);\n                this.setState({\n                    recordsList : recordsData,\n                    sum: this.calculateSum(recordsData)\n                });\n            })\n    }\n\n    render() {\n        return(\n        <div className=\"record\">\n            <h1>Money Manager</h1>\n            <form onSubmit={this.onSubmitSelect}>\n                <label>Select Year: </label>\n                <select id=\"year\" name=\"year\" value={this.state.selectedYear} onChange={this.handleSelectYear}>\n                    <option value=\"0\" selected>Select All</option>\n                    <option value=\"2020\">2020</option>\n                    <option value=\"2019\">2019</option>\n                    <option value=\"2018\">2018</option>\n                    <option value=\"2017\">2017</option>\n                    <option value=\"2016\">2016</option>\n                    <option value=\"2015\">2015</option>\n                    <option value=\"2014\">2014</option>\n                    <option value=\"2013\">2013</option>\n                    <option value=\"2012\">2012</option>\n                    <option value=\"2011\">2011</option>\n                    <option value=\"2010\">2010</option>\n                </select>\n                <label>Select Month: </label>\n                <select id=\"month\" name=\"month\" onChange={this.handleSelectMonth}>\n                    <option value=\"0\" selected>Select All</option>\n                    <option value=\"1\">JAN</option>\n                    <option value=\"2\">FEB</option>\n                    <option value=\"3\">MAR</option>\n                    <option value=\"4\">APR</option>\n                    <option value=\"5\">MAY</option>\n                    <option value=\"6\">JUN</option>\n                    <option value=\"7\">JUL</option>\n                    <option value=\"8\">AUG</option>\n                    <option value=\"9\">SEP</option>\n                    <option value=\"10\">OCT</option>\n                    <option value=\"11\">NOV</option>\n                    <option value=\"12\">DEC</option>\n                </select>\n                <input className=\"submit\" type=\"submit\" value=\"Submit\"></input>\n            </form>\n            <div className=\"expense_sum\">\n                <label>total expense: </label>\n                <span>{'$' + this.state.sum.toFixed(2)}</span>\n                <Popup trigger={<button> Show Expense Chart</button>} position=\"right center\">\n                    <div>\n\n\n                    </div>\n                </Popup>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <th></th>\n                        <th className='desc-h-col'>DATE</th>\n                        <th className='desc-h-col'>AMOUNT</th>\n                        <th className='desc-h-col'>CATEGORY</th>\n                        <th className='desc-h-col'>NOTES</th>\n                        <th className='button-col'></th>\n                        <th className='button-col'></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {this.state.recordsList.map(record =>\n                        <tr>\n                            <td className='counterCell'></td>\n                            <td className='desc-col'>{this.getLocalFormatDate(record.date)}</td>\n                            <td className='desc-col'>{record.amount.toFixed(2)}</td>\n                            <td className='desc-col'>{record.category}</td>\n                            <td className='desc-col'>{record.notes}</td>\n                            <td className='button-col'>\n                                <Link to={\n                                    {\n                                        pathname: '/update',\n                                        updateProps: record\n                                    }\n                                }><button>update</button></Link>\n                            </td>\n                            <td className='button-col'><button onClick = {(e) => {this.deleteRecord(e, record)}}>delete</button></td>\n                        </tr>\n                    )}\n                </tbody>\n            </table>\n        </div>\n    )\n    }\n}\n\nexport default Record;"]},"metadata":{},"sourceType":"module"}