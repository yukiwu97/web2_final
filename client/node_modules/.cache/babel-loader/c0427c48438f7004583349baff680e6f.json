{"ast":null,"code":"var _jsxFileName = \"/Users/mengjiang/Desktop/yuki_webprogram/web2/web2_final/src/components/record.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport dateFormat from 'dateformat';\nimport { Link } from 'react-router-dom';\nexport default class Record extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      recordsList: [],\n      sum: 0,\n      selectedYear: 0,\n      selectedMonth: 0\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.selectedYear == 0 && this.state.selectedMonth == 0) {\n      axios.get(\"http://localhost:3003/record\").then(res => {\n        const recordsData = res.data;\n        console.log(recordsData);\n        this.setState({\n          recordsList: recordsData,\n          sum: this.calculateSum(recordsData)\n        });\n      });\n    } // axios.get(\"http://localhost:3003/record\")\n    //     .then(res => {\n    //         const recordsData = res.data;\n    //         console.log(recordsData);\n    //         this.setState({\n    //             recordsList : recordsData\n    //         });\n    //     })\n\n  }\n\n  deleteRecord(e, record) {\n    e.preventDefault();\n    axios.get('http://localhost:3003/record/delete/' + record._id).then(res => {\n      console.log(res);\n      console.log(res.data);\n    });\n    window.location = '/';\n  }\n\n  getLocalFormatDate(d) {\n    const utcDate = new Date(d);\n    const localDate = new Date(utcDate.getTime() + utcDate.getTimezoneOffset() * 60000);\n    return dateFormat(localDate, \"ddd mmm dd, yyyy\");\n  }\n\n  calculateSum(dataList) {\n    //return dataList.reduce((a, b) => parseInt(a.amount) + parseInt(b.amount), 0)\n    var sum = 0;\n    dataList.forEach(item => {\n      sum = sum + parseFloat(item.amount);\n    });\n    return sum;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"record\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, \"Money Manager\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, \"Select Year: \"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"year\",\n      name: \"year\",\n      onChange: this.onChangeCategory,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2020\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }\n    }, \"2020\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2019\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    }, \"2019\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2018\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 25\n      }\n    }, \"2018\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2017\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    }, \"2017\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2016\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, \"2016\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2015\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }\n    }, \"2015\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2014\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }\n    }, \"2014\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2013\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    }, \"2013\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2012\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 25\n      }\n    }, \"2012\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2011\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }\n    }, \"2011\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2010\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }, \"2010\")), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, \"Select Month: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"month\",\n      placeholder: \"\",\n      value: this.state.selectedYear,\n      onChange: this.onChangeAmount,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"expense_sum\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, \"total expense: \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, '$' + this.state.sum.toFixed(2))), /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }\n    }, \"DATE\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }\n    }, \"AMOUNT\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    }, \"CATEGORY\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"desc-h-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }, \"NOTES\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, this.state.recordsList.map(record => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"counterCell\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }, this.getLocalFormatDate(record.date)), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 29\n      }\n    }, record.amount.toFixed(2)), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }\n    }, record.category), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"desc-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 29\n      }\n    }, record.notes), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: '/update',\n        updateProps: record\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 35\n      }\n    }, \"update\"))), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"button-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => {\n        this.deleteRecord(e, record);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 56\n      }\n    }, \"delete\")))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/mengjiang/Desktop/yuki_webprogram/web2/web2_final/src/components/record.component.js"],"names":["React","Component","axios","dateFormat","Link","Record","state","recordsList","sum","selectedYear","selectedMonth","componentDidMount","get","then","res","recordsData","data","console","log","setState","calculateSum","deleteRecord","e","record","preventDefault","_id","window","location","getLocalFormatDate","d","utcDate","Date","localDate","getTime","getTimezoneOffset","dataList","forEach","item","parseFloat","amount","render","onSubmit","onChangeCategory","onChangeAmount","toFixed","map","date","category","notes","pathname","updateProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport dateFormat from 'dateformat';\nimport { Link } from 'react-router-dom';\n\nexport default class Record extends Component {\n    state = {\n        recordsList: [],\n        sum: 0,\n        selectedYear: 0,\n        selectedMonth: 0\n    }\n\n    componentDidMount() {\n        if (this.state.selectedYear == 0 && this.state.selectedMonth == 0) {\n            axios.get(\"http://localhost:3003/record\")\n            .then(res => {\n                const recordsData = res.data;\n                console.log(recordsData);\n                this.setState({\n                    recordsList : recordsData,\n                    sum: this.calculateSum(recordsData)\n                });\n            })\n        }\n        // axios.get(\"http://localhost:3003/record\")\n        //     .then(res => {\n        //         const recordsData = res.data;\n        //         console.log(recordsData);\n        //         this.setState({\n        //             recordsList : recordsData\n        //         });\n        //     })\n    }\n\n    deleteRecord(e, record) {\n        e.preventDefault();\n\n        axios.get('http://localhost:3003/record/delete/' + record._id)\n            .then(res => {\n                console.log(res);\n                console.log(res.data);\n            })\n        window.location = '/';\n    }\n\n    getLocalFormatDate(d) {\n        const utcDate = new Date(d);\n        const localDate = new Date(utcDate.getTime() + utcDate.getTimezoneOffset() * 60000);\n        return dateFormat(localDate, \"ddd mmm dd, yyyy\");\n    }\n\n    calculateSum(dataList) {\n        //return dataList.reduce((a, b) => parseInt(a.amount) + parseInt(b.amount), 0)\n        var sum = 0;\n        dataList.forEach(item => {\n            sum = sum + parseFloat(item.amount);\n        });\n        return sum;\n    }\n\n    render() {\n        return(\n        <div className=\"record\">\n            <h1>Money Manager</h1>\n            <form onSubmit={this.onSubmit}>\n                <label>Select Year: </label>\n                <select id=\"year\" name=\"year\" onChange={this.onChangeCategory}>\n                        <option value=\"2020\">2020</option>\n                        <option value=\"2019\">2019</option>\n                        <option value=\"2018\">2018</option>\n                        <option value=\"2017\">2017</option>\n                        <option value=\"2016\">2016</option>\n                        <option value=\"2015\">2015</option>\n                        <option value=\"2014\">2014</option>\n                        <option value=\"2013\">2013</option>\n                        <option value=\"2012\">2012</option>\n                        <option value=\"2011\">2011</option>\n                        <option value=\"2010\">2010</option>\n                </select>\n                <label>Select Month: </label>\n                <input type=\"number\" name=\"month\" placeholder=\"\" value={this.state.selectedYear} onChange={this.onChangeAmount} required/>\n            </form>\n            <div className=\"expense_sum\">\n                <label>total expense: </label>\n                <span>{'$' + this.state.sum.toFixed(2)}</span>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <th></th>\n                        <th className='desc-h-col'>DATE</th>\n                        <th className='desc-h-col'>AMOUNT</th>\n                        <th className='desc-h-col'>CATEGORY</th>\n                        <th className='desc-h-col'>NOTES</th>\n                        <th className='button-col'></th>\n                        <th className='button-col'></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {this.state.recordsList.map(record =>\n                        <tr>\n                            <td className='counterCell'></td>\n                            <td className='desc-col'>{this.getLocalFormatDate(record.date)}</td>\n                            <td className='desc-col'>{record.amount.toFixed(2)}</td>\n                            <td className='desc-col'>{record.category}</td>\n                            <td className='desc-col'>{record.notes}</td>\n                            <td className='button-col'>\n                                <Link to={\n                                    {\n                                        pathname: '/update',\n                                        updateProps: record\n                                    }\n                                }><button>update</button></Link>\n                            </td>\n                            <td className='button-col'><button onClick = {(e) => {this.deleteRecord(e, record)}}>delete</button></td>\n                        </tr>\n                    )}\n                </tbody>\n            </table>\n        </div>\n    )\n    }\n}"]},"metadata":{},"sourceType":"module"}